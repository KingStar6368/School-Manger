@using School_Manager.Core.ViewModels.FModels
@model List<SchoolDto>

@{
    ViewData["Title"] = "<i class=\"bi bi-building\"></i> مدیریت مدارس";
    Layout = "_AdminLayout";
}

<div class="container mt-4 text-white" dir="rtl">
    <div class="card bg-dark text-white shadow-lg rounded-4 border-primary">
        <div class="card-header bg-primary bg-gradient d-flex justify-content-between align-items-center">
            <h4 class="mb-0 fw-bold">📋 لیست مدارس</h4>
            <a asp-action="Create" class="btn btn-success btn-sm fw-bold shadow-sm">
                <i class="bi bi-plus-circle me-1"></i> مدرسه جدید
            </a>
        </div>

        <div class="card-body">
            @if (Model != null && Model.Any())
            {
                <div class="table-responsive">
                    <table class="table table-dark table-bordered table-hover align-middle text-center mb-0">
                        <thead class="table-light text-dark">
                            <tr>
                                <th>🔢 ردیف</th>
                                <th><i class="bi bi-building"></i> نام مدرسه</th>
                                <th>👨‍💼 نام مدیر</th>
                                <th>⭐ امتیاز</th>
                                <th>📍 آدرس</th>
                                <th>⚙ عملیات</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var school in Model.Select((s, i) => new { Index = i + 1, School = s }))
                            {
                                <tr>
                                    <td>@school.Index</td>
                                    <td>@school.School.Name</td>
                                    <td>@school.School.ManagerName</td>
                                    <td>
                                        <div class="col-md-6 mb-3">
                                            <strong>⭐ امتیاز:</strong>
                                            <div>
                                                @for (int i = 1; i <= 5; i++)
                                                {
                                                    <i class="bi bi-star@(i <= school.School.Rate ? "-fill" : "") text-warning fs-6"></i>
                                                }
                                            </div>
                                        </div>
                                    </td>
                                    <td>@school.School.Address.Address</td>
                                    <td>
                                        <a asp-action="EditSchool" asp-route-SchoolId="@school.School.Id"
                                           class="btn bg-warning btn-sm btn-outline-light rounded-pill shadow-sm text-black" title="ویرایش">
                                            <i class="bi bi-pencil"></i> تغییر
                                        </a>
                                        <a asp-action="Details" asp-route-id="@school.School.Id"
                                           class="btn btn-sm btn-outline-light rounded-pill shadow-sm" title="نمایش">
                                            <i class="bi bi-eye"></i> نمایش
                                        </a>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
            else
            {
                <div class="alert alert-warning text-center fw-bold my-3" role="alert">
                    🚫 مدرسه‌ای یافت نشد!
                </div>
            }
        </div>
    </div>
</div>

<style>
    .rating {
        direction: ltr;
        unicode-bidi: bidi-override;
    }
</style>
