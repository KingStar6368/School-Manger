@using ServiceBase.Setting
@model ServiceBase.Setting.SettingDto
@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "ویرایش تنظیم";
    var settingTypes = Enum.GetValues(typeof(SettingType)).Cast<SettingType>().Where(x => x != SettingType.None);
}

<h2>ویرایش تنظیم</h2>

<form asp-action="Edit" enctype="multipart/form-data" method="post">
    <input type="hidden" asp-for="SettingType" />
    <div class="mb-3">
        <label class="form-label">نوع تنظیم</label>
        <input class="form-control" value="@Model.SettingType" disabled />
    </div>
    <div class="mb-3" id="valueInputContainer">
        <!-- Value input will be rendered here -->
    </div>
    <button type="submit" class="btn btn-primary">ذخیره تغییرات</button>
    <a asp-action="Index" class="btn btn-secondary">بازگشت</a>
</form>

@section Scripts {
<script>
    function renderValueInput() {
        var type = '@((int)Model.SettingType)';
        var container = document.getElementById('valueInputContainer');
        container.innerHTML = '';
        if (type >= 70) {
            container.innerHTML = '<label class="form-label">لوگو (تصویر)</label><input type="file" name="LogoFile" accept="image/*" class="form-control" />';
        }
        else
        {
            container.innerHTML = '<label class="form-label">مقدار (متن)</label><input type="text" name="Value" class="form-control" value="@Model.Value" required />';
        }
    }
    renderValueInput();
</script>
}
